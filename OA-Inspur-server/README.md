# OA Inspur Server

The project is generated by [LoopBack](http://loopback.io).

## Step 1 - install node.js
https://nodejs.org

## Step 2 - install mySQL
Keep the default configuration during installation, use user root, and set the password like ./storage/datasources.json.

## Step 3 - install redis
https://www.runoob.com/redis/redis-install.html

## Step 4 - Connect data source
1. Open a cmd window and switch the directory to C:\redis, run `redis-server.exe redis.windows.conf`;
2. Please keep redis-server running and restart a cmd window;
3. Switch the directory to  OA-Inspur/OA-Inspur-Server/;
4. Please make sure the mysql service is running;
5. Run `node ./bin/auto-migrate`;
6. Run `node ./bin/auto-update`;

## RUN
npm install
npm start (or `node .`)

### REST API 
http://localhost:3000/explorer/


# wiki
### 1. 管理员创建员工角色

#### ___endpoint :___
```javascript
 POST /RoleMaps
```

#### EXAMPLE : 
```javascript
{                     
  "principalType": "USER",
  "principalId": 0,          //employeeId
  "roleId": 0                //roleId  
}
```
#### 角色信息 : 
```javascript        
  [{
    "name": "superAdmin",
    "description": "超级管理员"
  },
  {
    "name": "user",
    "description": "普通用户"
  },
  {
    "name": "personnelAdmin",
    "description": "人事管理员"
  },
  {
    "name": "staffAdmin",
    "description": "员工管理员"
  },
  {
    "name": "departmentAdmin",
    "description": "部门管理员"
  },
  {
    "name": "ITAdmin",
    "description": "IT管理员"
  }]
```
